<div class="card" *ngFor="let integration of integrationList;trackBy: trackByFn">
  <div class="card-header">

    <div class="togglebutton pull-right">
      <label>
        <input type="checkbox" [(ngModel)]="integration.enabled" (change)="updateIntegrationStatus(integration)">
        <span class="toggle"></span>
      </label>
    </div>
    <h4 class="card-title">{{integration.templateName}}</h4>
    <h5 class="card-subtitle mb-2 text-muted">{{integration.templateDescription}}</h5>
  </div>
  <div class="card-body">

    <mat-form-field appearance="outline" class="example-full-width">
      <textarea rows=3 matInput (ngModelChange)="integration.dirty = true"
        [(ngModel)]="integration.templateContent"></textarea>
    </mat-form-field>

    <p *ngIf="integration.dirty">
      <a href="#" class="btn btn-primary" onclick="return false" (click)="updateTemplate(integration)">Update</a>
    </p>

    <div>
      <a data-toggle="collapse" href="#collapseTable{{integration.templateCode}}" aria-expanded="false"
        aria-controls="collapseExample">
        Details of available variables
      </a>
      <div class="collapse" id="collapseTable{{integration.templateCode}}">
        <table class="table">
          <thead>
            <tr>
              <th>Variable</th>
              <th>Name</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let variable of integration.variables">
              <td><span class="badge badge-primary">{{ '{{' + variable.variable + '}' + '}' }}</span></td>
              <td>{{variable.name}}</td>
              <td>{{variable.description}}</td>
            </tr>
          </tbody>
        </table>

        <h6>Sample template</h6>
        <p>{{integration.templateDefaultContent}}</p>
      </div>
    </div>
  </div>
</div>